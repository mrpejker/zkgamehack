'use strict';

var httpLink = require('./httpLink.js');
var httpUtils = require('./internals/httpUtils.js');

const formDataRequester = (opts)=>{
    if (opts.type !== 'mutation') {
        // TODO(?) handle formdata queries
        throw new Error('We only handle mutations with formdata');
    }
    return httpUtils.httpRequest({
        ...opts,
        getUrl () {
            return `${opts.url}/${opts.path}`;
        },
        getBody (opts) {
            if (!('input' in opts)) {
                return undefined;
            }
            if (!(opts.input instanceof FormData)) {
                throw new Error('Input is not FormData');
            }
            return opts.input;
        }
    });
};
const experimental_formDataLink = httpLink.httpLinkFactory({
    requester: formDataRequester
});

exports.experimental_formDataLink = experimental_formDataLink;
