import { isNotFoundError } from 'next/dist/client/components/not-found';
import { isRedirectError } from 'next/dist/client/components/redirect';
import { notFound, redirect } from 'next/navigation';
import { TRPCRedirectError } from './redirect.mjs';

/**
 * Rethrow errors that should be handled by Next.js
 */ const rethrowNextErrors = (error)=>{
    if (error.code === 'NOT_FOUND') {
        notFound();
    }
    if (error instanceof TRPCRedirectError) {
        redirect(...error.args);
    }
    const { cause  } = error;
    if (isRedirectError(cause) || isNotFoundError(cause)) {
        throw error.cause;
    }
};

export { rethrowNextErrors };
